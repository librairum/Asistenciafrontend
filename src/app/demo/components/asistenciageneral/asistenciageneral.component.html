<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="container">
    <p-panel header="Asistencia general">
        <p-breadcrumb class="max-w-full" [model]="items"></p-breadcrumb>
        <br />
    </p-panel>
</div>

<div class="card">
    <div class="flex align-items-center justify-content-between w-full">
        <!-- Contenedor de Fechas -->
        <div class="flex gap-3">
          <!-- Fecha de Inicio -->
          <div class="field">
            <label for="startDate" class="font-medium text-gray-700" style="padding-right: 7px;">Fecha de Inicio:</label>
            <p-calendar
              dateFormat="yy-mm-dd"
              [maxDate]="minStartDate"
              [(ngModel)]="startDate"
              inputId="startDate"
              class="w-full"
              placeholder="Selecciona una fecha"
              [showIcon]="true"
              (onDateSelect)="validateDates()"
            ></p-calendar>
          </div>
      
          <!-- Fecha Fin -->
          <div class="field">
            <label for="endDate" class="font-medium text-gray-700" style="padding-right: 7px;">Fecha Fin:</label>
            <p-calendar
              dateFormat="yy-mm-dd"
              [(ngModel)]="endDate"
              [maxDate]="maxEndDate"
              inputId="endDate"
              class="w-full"
              placeholder="Selecciona una fecha"
              [showIcon]="true"
              (onDateSelect)="validateDates()"
            ></p-calendar>
          </div>
        </div>
      
        <!-- Botón Buscar -->
        <div class="field">
          <button
            pButton
            type="button"
            label="Buscar"
            icon="pi pi-search"
            (click)="Buscar()"
            class="p-button-sm"
          ></button>
        </div>
      </div>
      

    <p-table
        #dt1
        [value]="Asistenciagenerales"
        dataKey="id"
        editMode="row"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20]"
        [loading]="loading"
        responsiveLayout="scroll"
    >
        <!-- Columnas filtros -->
        <ng-template pTemplate="header">
            <tr>
                <th>Código marcador</th>
                <th>Nombre marcador</th>
                <th>Código empleado</th>
                <th>Nombre y apellidos</th>
                <th>Fecha</th>
                <th>Tiempo</th>
            </tr>
        </ng-template>

        <!-- Cuerpo de la tabla -->
        <ng-template
            pTemplate="body"
            let-rowData
            let-editing="editing"
            let-ri="rowIndex"
        >
            <tr [pEditableRow]="rowData">
                <td>{{ rowData.codigoMarcador }}</td>
                <td>{{ rowData.nombreMarcador }}</td>
                <td>{{ rowData.codigoEmpleado }}</td>
                <td>{{ rowData.nombreEmpleado }}</td>
                <td>{{ rowData.fechaFormateada }}</td>
                <td>{{ rowData.tiempoFormateado }}</td>
            </tr>
        </ng-template>

        <!-- Mensaje vacío -->
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="6">No se encontraron registros.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
